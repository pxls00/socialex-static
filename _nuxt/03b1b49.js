(window.webpackJsonp=window.webpackJsonp||[]).push([[20,11,18],{395:function(e,t,r){var content=r(399);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(96).default)("6c5c0534",content,!0,{sourceMap:!1})},398:function(e,t,r){"use strict";var o=r(395),n=r.n(o);r.d(t,"default",(function(){return n.a}))},399:function(e,t,r){var o=r(95)(!1);o.push([e.i,'.block_5XzDG textarea{display:block;width:100%;height:auto;min-height:48px;box-sizing:border-box;color:#000;border-radius:5px;padding:22px 16px 4px;-webkit-appearance:none;-moz-appearance:none;box-shadow:none;outline:none}.block_5XzDG textarea::-webkit-inner-spin-button,.block_5XzDG textarea::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.block_5XzDG textarea::-moz-placeholder{font-size:16px;line-height:1.4;color:rgba(var(--secondary),.8)}.block_5XzDG textarea::placeholder{font-size:16px;line-height:1.4;color:rgba(var(--secondary),.8)}.block_field_elhih{overflow:hidden}.block_input_frw8W{position:relative;flex:1 1 100%;padding-top:20px}.block_placeholder_2Ib-c{position:absolute;top:73px;left:0;cursor:text;font-size:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;transition:transform .2s,font-size .2s,color .2s;z-index:2}.block_help_MbKVt,.block_placeholder_2Ib-c{color:rgba(0,0,0,.8);padding:0 16px}.block_help_MbKVt{font-size:12px;line-height:1.2;margin:4px 0 0}.block_help_MbKVt p{margin:0}.block--focus_dUXWN .block_placeholder_2Ib-c{font-size:12px;color:rgba(0,0,0,.5);top:0}.block--filled_GiLcZ .block_placeholder_2Ib-c{font-size:12px;top:0}.block--required_wdfrD .block_placeholder_2Ib-c:after{content:"*";display:inline-block}.block--disabled_kmOKz .block_field_elhih{cursor:not-allowed;opacity:.6}.block--disabled_kmOKz .block_placeholder_2Ib-c{pointer-events:none}.block--disabled_kmOKz textarea{cursor:not-allowed}.block--has-error_ph1yR .block_help_MbKVt,.block--has-error_ph1yR .block_placeholder_2Ib-c{color:#f30}',""]),o.locals={block:"block_5XzDG",block_field:"block_field_elhih",block_input:"block_input_frw8W",block_placeholder:"block_placeholder_2Ib-c",block_help:"block_help_MbKVt","block--focus":"block--focus_dUXWN","block--filled":"block--filled_GiLcZ","block--required":"block--required_wdfrD","block--disabled":"block--disabled_kmOKz","block--has-error":"block--has-error_ph1yR"},e.exports=o},423:function(e,t,r){"use strict";r.r(t);var o=r(52),n=r(3),l=(r(8),r(55),r(57),{name:"AppWysiwyg",components:{"ckeditor-nuxt":function(){return r.e(32).then(r.t.bind(null,453,7))}},model:{prop:"value",event:"change"},props:{value:{type:String,default:""},placeholder:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},inputClasses:{type:Array,default:function(){return[]}}},data:function(){return{inFocus:!1,fieldScrollTop:0,editorConfig:{removePlugins:["Title"]}}},methods:{handleChange:function(e){this.$emit("change",e)},handleFocus:function(){this.inFocus=!0,this.$emit("focus")},handleBlur:function(){this.inFocus=!1,this.$emit("blur")},handleWrapperClick:function(){this.$refs.blockTextarea.$el.parentElement.querySelector('[contenteditable="true"]').focus()}}}),c=r(398),d=r(67);var component=Object(d.a)(l,(function(){var e=this,t=e._self._c;return t("div",{ref:"block",class:[e.$style.block,Object(n.a)({},e.$style["block--focus"],e.inFocus),Object(n.a)({},e.$style["block--required"],e.required),Object(n.a)({},e.$style["block--disabled"],e.disabled),Object(n.a)({},e.$style["block--has-error"],e.hasError),Object(n.a)({},e.$style["block--filled"],e.value&&e.value.length)]},[t("div",{class:e.$style.block_field,on:{click:function(t){return t.preventDefault(),e.handleWrapperClick.apply(null,arguments)}}},[t("div",{class:e.$style.block_input},[t("div",{class:e.$style.block_placeholder,style:{marginTop:"-".concat(e.fieldScrollTop,"px")}},[e._v("\n        "+e._s(e.placeholder)+"\n      ")]),e._v(" "),t("ckeditor-nuxt",{ref:"blockTextarea",class:Object(o.a)(e.inputClasses),attrs:{value:e.value,config:e.editorConfig,disabled:e.disabled},on:{input:e.handleChange,focus:e.handleFocus,blur:e.handleBlur}})],1)]),e._v(" "),e.$slots.help?t("div",{class:e.$style.block_help},[e._t("help")],2):e._e()])}),[],!1,(function(e){this.$style=c.default.locals||c.default}),null,null);t.default=component.exports},424:function(e,t,r){"use strict";var o=r(39);r(73);t.a={methods:{removeLike:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$loader.show(),r.prev=1,r.next=4,t.$api.postLike.removePostLike({},{id:e._id});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),t.handleError(r.t0);case 9:return r.prev=9,t.$loader.hide(),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[1,6,9,12]])})))()},addLike:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$loader.show(),r.prev=1,r.next=4,t.$api.postLike.addPostLike({},{id:e._id});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),t.handleError(r.t0);case 9:return r.prev=9,t.$loader.hide(),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[1,6,9,12]])})))()},savePost:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$loader.show(),r.prev=1,r.next=4,t.$api.postSave.savePost({},{id:e._id});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),t.handleError(r.t0);case 9:return r.prev=9,t.$loader.hide(),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[1,6,9,12]])})))()},removeSavedPost:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$loader.show(),r.prev=1,r.next=4,t.$api.postSave.removeSavedPost({},{id:e._id});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),t.handleError(r.t0);case 9:return r.prev=9,t.$loader.hide(),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[1,6,9,12]])})))()},deletePostItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$loader.show(),r.prev=1,r.next=4,t.$api.posts.deletePostsItem({},{id:e._id});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),t.handleError(r.t0);case 9:return r.prev=9,t.$loader.hide(),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[1,6,9,12]])})))()},showLikeList:function(data){this.postItem=data,this.$bvModal.show("likedUsersModal")},closeLikedUsersModal:function(){this.postItem={}},showMoreInfo:function(data){this.postItem=data,this.$bvModal.show("moreInfoPostModal")},closeMoreInfoPostModal:function(){this.postItem={}},showDeleteItem:function(data){this.postItem=data,this.$bvModal.show("deletePost")}}}},428:function(e,t,r){"use strict";var o=r(52);r(214);t.a={methods:{applyDrag:function(e,t){var r=t.removedIndex,n=t.addedIndex,l=t.payload;if(null===r&&null===n)return e;var c=Object(o.a)(e),d=l;return null!==r&&(d=c.splice(r,1)[0]),null!==n&&c.splice(n,0,d),c},onDrop:function(e,t){return this.applyDrag(t,e)}}}},441:function(e,t,r){"use strict";r.r(t);r(13),r(82);var o=r(3),n=(r(14),r(214),r(10),r(8),r(15),r(11),r(16),r(436)),l=r(215),c=r(397),d=r(428);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var h={name:"FormEditPostComponent",components:{AppWysiwyg:r(423).default,Container:n.Container,Draggable:n.Draggable},mixins:[l.validationMixin,d.a],props:{initialData:{type:Object,default:function(){}}},data:function(){return{formFields:{title:"",description:"",images:[]},imageIndex:0}},watch:{initialData:function(){this.setFormData(this.initialData)}},mounted:function(){this.setFormData(this.initialData)},methods:{validateState:function(e){var t=this.$v.formFields[e],r=t.$dirty,o=t.$error;return r?!o:null},clearFormData:function(){this.formFields.title="",this.formFields.description="",this.formFields.images=[]},setFormData:function(data){Object.keys(data).length&&(this.formFields.title=data.title,this.formFields.description=data.description,this.formFields.images=data.media)},removeImg:function(e){this.imageIndex=e,this.$bvModal.show("deleteItemImage")},deleteImagePost:function(){this.formFields.images.splice(this.imageIndex,1),this.$bvModal.hide("deleteItemImage"),this.$notify({message:"Click to save button for saving changes",variant:"warning"})},changeQueue:function(e){if(this.formFields.images.length<=1)return this.$notify({message:"You can not change queue of images",variant:"warning"});this.formFields.images=this.onDrop(e,this.formFields.images),this.$notify({message:"Click to save button for saving changes",variant:"warning"})},onSubmit:function(){if(this.$v.$touch(),!this.$v.$invalid)try{var e=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.initialData);return e.title=this.formFields.title,e.description=this.formFields.description,e.media=this.formFields.images,this.$emit("submit",e)}catch(e){this.handleError(e)}},deleteItemBtn:function(){this.$emit("deletePost",this.post)}},validations:{formFields:{title:{required:c.required},description:{required:c.required}}}},m=h,v=r(67),component=Object(v.a)(m,(function(){var e,t=this,r=t._self._c;return r("b-form",{staticClass:"post form form--post",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[r("div",{staticClass:"post__top-create"},[r("div",{staticClass:"post__right"},[r("b-form-group",{attrs:{label:"Title:","label-for":"input-name"}},[r("b-form-input",{staticClass:"post__input",attrs:{id:"input-name",state:t.validateState("title"),"aria-describedby":"input-title-feedback",type:"text",placeholder:"Post title"},model:{value:t.$v.formFields.title.$model,callback:function(e){t.$set(t.$v.formFields.title,"$model",e)},expression:"$v.formFields.title.$model"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{id:"input-title-feedback"}},[t.$v.formFields.title.required?t._e():r("p",[t._v("This is a required field")])])],1),t._v(" "),r("b-form-group",[r("client-only",{attrs:{placeholder:"loading..."}},[r("AppWysiwyg",{attrs:{"has-error":t.$v.formFields.description.$error&&t.$v.$dirty,placeholder:"Description"},scopedSlots:t._u([t.$v.formFields.description.$error&&t.$v.$dirty?{key:"help",fn:function(){return[t.$v.formFields.description.required?t._e():r("p",[t._v("\n                Field is required.\n              ")])]},proxy:!0}:null],null,!0),model:{value:t.$v.formFields.description.$model,callback:function(e){t.$set(t.$v.formFields.description,"$model",e)},expression:"$v.formFields.description.$model"}})],1)],1)],1)]),t._v(" "),r("h4",{staticClass:"post__uploaded-images-title"},[t._v("Post images")]),t._v(" "),null!==(e=t.formFields.images)&&void 0!==e&&e.length?r("div",{staticClass:"post__uploaded-images"},[r("Container",{attrs:{orientation:"horizontal",behaviour:"contain"},on:{drop:t.changeQueue}},t._l(t.formFields.images,(function(e,o){return r("Draggable",{key:o},[r("div",{class:["post__uploaded-image"]},[r("img",{attrs:{src:e.url,alt:""}}),t._v(" "),t.formFields.images.length>1?r("div",{staticClass:"post__uploaded-image-remove",on:{click:function(e){return t.removeImg(o)}}},[r("b-icon",{attrs:{icon:"x"}})],1):t._e(),t._v(" "),r("div",{staticClass:"post__uploaded-image-index"},[t._v("\n            "+t._s(o+1)+"\n          ")])])])})),1)],1):t._e(),t._v(" "),r("div",{staticClass:"w-100 d-flex justify-content-end"},[r("button",{staticClass:"button button--warning",attrs:{type:"button"},on:{click:function(e){t.$router.push(t.$getRoutePath("home"))}}},[t._v("\n      Cancel\n    ")]),t._v(" "),r("button",{staticClass:"button ml-1 button--danger",attrs:{type:"button"},on:{click:t.deleteItemBtn}},[t._v("\n      Delete\n    ")]),t._v(" "),r("button",{staticClass:"button ml-1",attrs:{type:"submit"}},[t._v("Save")])]),t._v(" "),r("client-only",[r("AppModal",{attrs:{id:"deleteItemImage"},scopedSlots:t._u([{key:"default",fn:function(){return[r("h5",{staticClass:"mb-4"},[t._v("\n          Are you sure you want to delete the image of post ? You can't add\n          new image after deletion !\n        ")]),t._v(" "),r("div",{staticClass:"d-flex w-100 justify-content-end"},[r("button",{staticClass:"button mr-2",attrs:{type:"buton"},on:{click:function(e){return t.$bvModal.hide("deleteItemImage")}}},[t._v("\n            Cancel\n          ")]),t._v(" "),r("button",{staticClass:"button button--danger",attrs:{type:"button"},on:{click:t.deleteImagePost}},[t._v("\n            Delete\n          ")])])]},proxy:!0}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports},461:function(e,t,r){"use strict";r.r(t);var o=r(39),n=(r(13),r(82),r(73),r(441)),l=r(424),c={name:"EditPostPage",components:{EditPostForm:n.default},mixins:[l.a],middleware:["auth"],data:function(){return{post:{}}},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getPostItem(e.$route.params.id);case 2:e.post=t.sent;case 3:case"end":return t.stop()}}),t)})))()},head:function(){return{title:"Edit post",meta:[{hid:"og:site_name",property:"og:site_name",content:"SocialEx"},{hid:"og:title",property:"og:title",content:"Edit post page"},{hid:"og:description",property:"og:description",content:"The project of pxls00. Editing and publication of content on the website as directed by the digital content manager"}]}},methods:{onSubmit:function(data){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$loader.show(),t.prev=1,r={title:data.title,description:data.description,media:data.media},t.next=5,e.$api.posts.editPostsItem({data:r},{id:data._id});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e.handleError(t.t0);case 10:return t.prev=10,e.$router.push(e.$getRoutePath("home")),e.$loader.hide(),t.finish(10);case 14:case"end":return t.stop()}}),t,null,[[1,7,10,14]])})))()},getPostItem:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$loader.show(),r.prev=1,r.next=4,t.$api.posts.getPostItem({},{id:e});case 4:return o=r.sent,r.next=7,o;case 7:return r.abrupt("return",r.sent);case 10:r.prev=10,r.t0=r.catch(1),t.handleError(r.t0);case 13:return r.prev=13,t.$loader.hide(),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[1,10,13,16]])})))()},deletePostItemClicked:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.deletePostItem(e.postItem);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.handleError(t.t0);case 8:return t.prev=8,e.$router.push(e.$getRoutePath("home")),e.$bvModal.hide("deletePost"),t.finish(8);case 12:case"end":return t.stop()}}),t,null,[[0,5,8,12]])})))()}}},d=r(67),component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"edit-post-page"},[t("EditPostForm",{ref:"formEditPost",attrs:{"initial-data":e.post},on:{submit:e.onSubmit,deletePost:function(t){return e.$bvModal.show("deletePost")}}}),e._v(" "),t("client-only",[t("AppModal",{attrs:{id:"deletePost"},scopedSlots:e._u([{key:"default",fn:function(){return[t("h5",{staticClass:"mb-4"},[e._v("\n          Are you sure you want to delete the post ?\n        ")]),e._v(" "),t("div",{staticClass:"d-flex w-100 justify-content-end"},[t("button",{staticClass:"button mr-2",attrs:{type:"buton"},on:{click:function(t){return e.$bvModal.hide("deletePost")}}},[e._v("\n            Cancel\n          ")]),e._v(" "),t("button",{staticClass:"button button--danger",attrs:{type:"button"},on:{click:e.deletePostItemClicked}},[e._v("\n            Delete\n          ")])])]},proxy:!0}])})],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{EditPostForm:r(441).default})}}]);