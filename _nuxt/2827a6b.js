(window.webpackJsonp=window.webpackJsonp||[]).push([[25,7,14,17],{396:function(t,e,o){"use strict";o.r(e);var n=o(52),r=(o(42),o(14),o(13),o(10),o(15),o(11),o(16),o(3)),c=(o(8),o(56),o(118));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"AppAccountHeaderComponent",props:{account:{type:Object,required:!0}},computed:f(f({},Object(c.b)("auth",["user"])),{},{getCurrent:function(){return"_id"in this.account&&this.account._id.toString()===this.user._id.toString()?["profile"]:["user",this.account._id]}})},v=o(67),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"account"},[e("div",{staticClass:"account-avatar"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent))}},[e("img",{attrs:{src:t.account.image,alt:"profile logo"}})])],1),t._v(" "),e("div",{staticClass:"account-info"},[e("div",{staticClass:"account-name"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent))}},[e("h3",[t._v(t._s(t.account.name))])])],1),t._v(" "),e("div",{staticClass:"account-email"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent))}},[e("p",[t._v(t._s(t.account.email))])])],1)]),t._v(" "),t._t("actions")],2)}),[],!1,null,null,null);e.default=component.exports},432:function(t,e,o){"use strict";o.r(e);o(14),o(42),o(13),o(10),o(15),o(11),o(16);var n=o(3),r=(o(291),o(8),o(56),o(119),o(118));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"ProfileAccountComponent",props:{account:{type:Object,required:!0},postLenght:{type:Number,required:!0}},data:function(){return{showMoreBio:!1}},computed:l(l({},Object(r.b)("auth",["user"])),{},{getCurrent:function(){return!(!Object.keys(this.account).length||this.account._id.toString()!==this.user._id.toString())},getFollowed:function(){var t=this;return!(this.getCurrent||!Object.keys(this.account).length||!this.account.followers.find((function(e){return e._id===t.user._id.toString()})))}}),methods:{getPosts:function(){this.$emit("getPosts")},getFollowers:function(){this.$emit("followers")},getFollowings:function(){this.$emit("followings")}}},d=o(67),component=Object(d.a)(f,(function(){var t,e,o=this,n=o._self._c;return n("div",{staticClass:"profile"},[n("div",{staticClass:"profile__top"},[n("div",{staticClass:"profile__top-left"},[n("div",{staticClass:"profile__top-avatar"},[n("img",{attrs:{src:o.account.image}})])]),o._v(" "),n("div",{staticClass:"profile__top-right"},[Object.keys(o.account).length?n("div",{staticClass:"profile__top-info"},[n("h4",{staticClass:"profile__top-name"},[o._v(o._s(o.account.name))]),o._v(" "),o.getCurrent?n("nuxt-link",{attrs:{to:o.$getRoutePath("settings")}},[n("button",{staticClass:"button"},[o._v("Edit profile")])]):o.getFollowed?n("button",{staticClass:"button button--danger",on:{click:function(t){return o.$emit("unfollow")}}},[o._v("\n          Unfollow\n        ")]):o.getFollowed?o._e():n("button",{staticClass:"button",on:{click:function(t){return o.$emit("follow")}}},[o._v("\n          Follow\n        ")])],1):o._e(),o._v(" "),n("div",{staticClass:"profile__top-credentials"},[n("p",{staticClass:"profile__top-credentials-item profile__top-credentials-posts"},[n("span",{on:{click:o.getPosts}},[o._v(o._s(o.postLenght||0))]),o._v(" posts\n        ")]),o._v(" "),n("p",{staticClass:"profile__top-credentials-item profile__top-credentials-followers"},[n("span",{on:{click:o.getFollowers}},[o._v(o._s(null===(t=o.account.followers)||void 0===t?void 0:t.length))]),o._v("\n          followers\n        ")]),o._v(" "),n("p",{staticClass:"profile__top-credentials-item profile__top-credentials-followings"},[n("span",{on:{click:o.getFollowings}},[o._v(o._s(null===(e=o.account.followings)||void 0===e?void 0:e.length))]),o._v("\n          following\n        ")])])]),o._v(" "),n("div",{staticClass:"profile__top-bio w-100"},[n("div",{staticClass:"profile__top-triger w-100 d-flex justify-content-between align-items-center"},[o._v("\n        Account bio:\n        "),n("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accountBio",modifiers:{accountBio:!0}}],class:[{"button--warning":o.showMoreBio},"button","button--sm"],attrs:{type:"button"}},[o._v("\n          "+o._s(o.showMoreBio?"Hide":"Show")+"\n          "),n("span",[n("b-icon",{attrs:{icon:o.showMoreBio?"arrow-bar-up":"arrow-bar-down"}})],1)])]),o._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:"accountBio"},on:{show:function(t){o.showMoreBio=!0},hide:function(t){o.showMoreBio=!1}},scopedSlots:o._u([{key:"default",fn:function(){return[n("div",{staticClass:"profile__top-bio-content"},[n("div",{staticClass:"profile__top-desc",domProps:{innerHTML:o._s(o.account.bio)}})])]},proxy:!0}])})],1)]),o._v(" "),n("div",{staticClass:"profile__divider"}),o._v(" "),o._t("tabs")],2)}),[],!1,null,null,null);e.default=component.exports},433:function(t,e,o){"use strict";o.r(e);o(14),o(13),o(10),o(15),o(11),o(16);var n=o(3),r=(o(119),o(8),o(56),o(118));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"AccountPostComponent",props:{item:{type:Object,required:!0}},computed:l(l({},Object(r.b)("auth",["user"])),{},{getLiked:function(){var t=this;return!!this.item.likes.find((function(e){return e._id.toString()===t.user._id.toString()}))},getSaved:function(){var t=this;return!(!this.item.savedUsers||!this.item.savedUsers.find((function(e){return e._id.toString()===t.user._id.toString()})))}}),methods:{toPostBtn:function(){this.$emit("goToPost",this.item)}}},d=o(67),component=Object(d.a)(f,(function(){var t,e,o,n=this,r=n._self._c;return r("div",{staticClass:"posts__item"},[r("div",{staticClass:"posts__item-img"},[r("img",{attrs:{src:n.item.media?n.item.media[0].url:n.item.img,alt:"",width:"250px",height:"250px"}})]),n._v(" "),r("div",{staticClass:"posts__item-credentials",on:{click:n.toPostBtn}},[r("span",{staticClass:"posts__item-credentials-item posts__item-credentials--like"},[n._v("\n      "+n._s(Array.isArray(n.item.likes)?null===(t=n.item.likes)||void 0===t?void 0:t.length:n.item.likes)+" "),r("b-icon",{attrs:{icon:n.getLiked?"heart-fill":"heart"}})],1),n._v(" "),r("span",{staticClass:"posts__item-credentials-item posts__item-credentials--comment"},[n._v("\n      "+n._s(null===(e=n.item)||void 0===e?void 0:e.commentsLength)+" "),r("b-icon",{attrs:{icon:"chat-dots"}})],1),n._v(" "),n.item.savedUsers?r("span",{staticClass:"posts__item-credentials-item posts__item-credentials--save"},[n._v("\n      "+n._s(Array.isArray(n.item.savedUsers)?null===(o=n.item.savedUsers)||void 0===o?void 0:o.length:n.item.savedUsers)+" "),r("b-icon",{attrs:{icon:n.getSaved?"bookmark-plus-fill":"bookmark-plus"}})],1):n._e()])])}),[],!1,null,null,null);e.default=component.exports},457:function(t,e,o){"use strict";o.r(e);o(14),o(13),o(15),o(11),o(16);var n=o(3),r=o(39),c=(o(119),o(8),o(56),o(10),o(42),o(73),o(118)),l=o(432),f=o(396),d=o(433);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var _={name:"ProfilePage",components:{AccountComponent:l.default,AppAccountHeader:f.default,AppAccountPost:d.default},middleware:["auth"],data:function(){return{userProfile:{},posts:[],savedPosts:[],postsPage:!0}},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getUser(t.user._id);case 2:return e.next=4,t.getUserPosts(t.user._id);case 4:case"end":return e.stop()}}),e)})))()},head:function(){return{title:"Profile",meta:[{hid:"og:site_name",property:"og:site_name",content:"SocialEx"},{hid:"og:title",property:"og:title",content:"Profile page"},{hid:"og:description",property:"og:description",content:"The project of pxls00. Editing and publication of content on the website as directed by the digital content manager"}]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)("auth",["user"])),methods:{toPost:function(data){this.$router.push(this.$getRoutePath("post",data._id))},getUser:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.$loader.show(),o.prev=1,o.next=4,e.$api.users.getUserById({},{id:t});case 4:return e.userProfile=o.sent,o.next=7,e.userProfile.savedPosts;case 7:e.savedPosts=o.sent,o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),e.handleError(o.t0);case 13:case"end":return o.stop()}}),o,null,[[1,10]])})))()},getUserPosts:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.$loader.show(),o.prev=1,o.next=4,e.$api.posts.getPostsList({params:{user:t}});case 4:return n=o.sent,o.next=7,n.data;case 7:return e.posts=o.sent,o.next=10,n.count;case 10:e.userProfile.postsLength=o.sent,o.next=16;break;case 13:o.prev=13,o.t0=o.catch(1),e.handleError(o.t0);case 16:return o.prev=16,e.$loader.hide(),o.finish(16);case 19:case"end":return o.stop()}}),o,null,[[1,13,16,19]])})))()},unFollowUser:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e.$loader.show(),n=e.userProfile.followings.find((function(e){return e._id.toString()===t.toString()})),o.prev=2,o.next=5,e.$api.follow.unFollowUser({},{id:t});case 5:return o.next=7,e.$auth.fetchUser();case 7:e.userProfile.followings=e.userProfile.followings.filter((function(e){return e._id.toString()!==t.toString()})),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(2),e.handleError(o.t0);case 13:return o.prev=13,e.$loader.hide(),e.$notify({message:"".concat(n.name," has been unfollowed"),variant:"success",delay:2e3}),o.finish(13);case 17:case"end":return o.stop()}}),o,null,[[2,10,13,17]])})))()}}},h=_,m=o(67),component=Object(m.a)(h,(function(){var t=this,e=t._self._c;return e("div",[e("AccountComponent",{attrs:{account:t.userProfile,"post-lenght":t.posts.length},on:{followers:function(e){return t.$bvModal.show("followers")},followings:function(e){return t.$bvModal.show("followings")}},scopedSlots:t._u([{key:"tabs",fn:function(){return[e("div",{staticClass:"d-flex justify-content-center mt-4 mb-4"},[e("button",{class:[{anactive:!t.postsPage},"button button--lg"],on:{click:function(e){t.postsPage=!0}}},[t._v("\n          POSTS\n          "),e("b-icon",{attrs:{icon:"life-preserver"}})],1),t._v(" "),e("button",{class:[{anactive:t.postsPage},"button button--lg ml-2"],on:{click:function(e){t.postsPage=!1}}},[t._v("\n          SAVED\n          "),e("b-icon",{attrs:{icon:"save-fill"}})],1)]),t._v(" "),t.postsPage&&t.posts.length?e("div",{staticClass:"posts"},t._l(t.posts,(function(o,n){return e("AppAccountPost",{key:n,attrs:{item:o},on:{goToPost:t.toPost}})})),1):!t.postsPage&&t.savedPosts.length?e("div",{staticClass:"posts"},t._l(t.savedPosts,(function(o,n){return e("AppAccountPost",{key:n,attrs:{item:o},on:{goToPost:t.toPost}})})),1):t.posts.length?t.savedPosts.length?t._e():e("p",[t._v("You have not saved posts yet")]):e("p",[t._v("You have not created posts yet")])]},proxy:!0}])}),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"followers"},on:{close:function(e){return t.$bvModal.hide("followers")}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Followers")]},proxy:!0},{key:"default",fn:function(){var o;return[t._l(t.userProfile.followers,(function(o,n){return e("AppAccountHeader",{key:n,staticClass:"account--item",attrs:{account:o},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"sugg-action"},[e("nuxt-link",{attrs:{to:t.$getRoutePath("user",o._id)}},[e("button",{staticClass:"button button--sm"},[t._v("Watch")])])],1)]},proxy:!0}],null,!0)})})),t._v(" "),null!==(o=t.userProfile.followers)&&void 0!==o&&o.length?t._e():e("p",[t._v("You have no followers yet")])]},proxy:!0}])})],1),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"followings"},on:{close:function(e){return t.$bvModal.hide("followings")}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Followings")]},proxy:!0},{key:"default",fn:function(){var o;return[t._l(t.userProfile.followings,(function(o,n){return e("AppAccountHeader",{key:n,staticClass:"account--item",attrs:{account:o},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"sugg-action"},[e("button",{staticClass:"button button--sm button--danger",on:{click:function(e){return t.unFollowUser(o._id)}}},[t._v("\n                Unfollow\n              ")])])]},proxy:!0}],null,!0)})})),t._v(" "),null!==(o=t.userProfile.followings)&&void 0!==o&&o.length?t._e():e("p",[t._v("\n          You have no followings yet\n        ")])]},proxy:!0}])})],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);