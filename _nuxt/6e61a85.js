(window.webpackJsonp=window.webpackJsonp||[]).push([[29,7,14,17],{396:function(t,e,r){"use strict";r.r(e);var n=r(52),o=(r(42),r(14),r(13),r(10),r(15),r(11),r(16),r(3)),c=(r(8),r(56),r(118));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"AppAccountHeaderComponent",props:{account:{type:Object,required:!0}},computed:f(f({},Object(c.b)("auth",["user"])),{},{getCurrent:function(){return"_id"in this.account&&this.account._id.toString()===this.user._id.toString()?["profile"]:["user",this.account._id]}})},v=r(67),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"account"},[e("div",{staticClass:"account-avatar"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent))}},[e("img",{attrs:{src:t.account.image,alt:"profile logo"}})])],1),t._v(" "),e("div",{staticClass:"account-info"},[e("div",{staticClass:"account-name"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent))}},[e("h3",[t._v(t._s(t.account.name))])])],1),t._v(" "),e("div",{staticClass:"account-email"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent))}},[e("p",[t._v(t._s(t.account.email))])])],1)]),t._v(" "),t._t("actions")],2)}),[],!1,null,null,null);e.default=component.exports},432:function(t,e,r){"use strict";r.r(e);r(14),r(42),r(13),r(10),r(15),r(11),r(16);var n=r(3),o=(r(291),r(8),r(56),r(119),r(118));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"ProfileAccountComponent",props:{account:{type:Object,required:!0},postLenght:{type:Number,required:!0}},data:function(){return{showMoreBio:!1}},computed:l(l({},Object(o.b)("auth",["user"])),{},{getCurrent:function(){return!(!Object.keys(this.account).length||this.account._id.toString()!==this.user._id.toString())},getFollowed:function(){var t=this;return!(this.getCurrent||!Object.keys(this.account).length||!this.account.followers.find((function(e){return e._id===t.user._id.toString()})))}}),methods:{getPosts:function(){this.$emit("getPosts")},getFollowers:function(){this.$emit("followers")},getFollowings:function(){this.$emit("followings")}}},d=r(67),component=Object(d.a)(f,(function(){var t,e,r=this,n=r._self._c;return n("div",{staticClass:"profile"},[n("div",{staticClass:"profile__top"},[n("div",{staticClass:"profile__top-left"},[n("div",{staticClass:"profile__top-avatar"},[n("img",{attrs:{src:r.account.image}})])]),r._v(" "),n("div",{staticClass:"profile__top-right"},[Object.keys(r.account).length?n("div",{staticClass:"profile__top-info"},[n("h4",{staticClass:"profile__top-name"},[r._v(r._s(r.account.name))]),r._v(" "),r.getCurrent?n("nuxt-link",{attrs:{to:r.$getRoutePath("settings")}},[n("button",{staticClass:"button"},[r._v("Edit profile")])]):r.getFollowed?n("button",{staticClass:"button button--danger",on:{click:function(t){return r.$emit("unfollow")}}},[r._v("\n          Unfollow\n        ")]):r.getFollowed?r._e():n("button",{staticClass:"button",on:{click:function(t){return r.$emit("follow")}}},[r._v("\n          Follow\n        ")])],1):r._e(),r._v(" "),n("div",{staticClass:"profile__top-credentials"},[n("p",{staticClass:"profile__top-credentials-item profile__top-credentials-posts"},[n("span",{on:{click:r.getPosts}},[r._v(r._s(r.postLenght||0))]),r._v(" posts\n        ")]),r._v(" "),n("p",{staticClass:"profile__top-credentials-item profile__top-credentials-followers"},[n("span",{on:{click:r.getFollowers}},[r._v(r._s(null===(t=r.account.followers)||void 0===t?void 0:t.length))]),r._v("\n          followers\n        ")]),r._v(" "),n("p",{staticClass:"profile__top-credentials-item profile__top-credentials-followings"},[n("span",{on:{click:r.getFollowings}},[r._v(r._s(null===(e=r.account.followings)||void 0===e?void 0:e.length))]),r._v("\n          following\n        ")])])]),r._v(" "),n("div",{staticClass:"profile__top-bio w-100"},[n("div",{staticClass:"profile__top-triger w-100 d-flex justify-content-between align-items-center"},[r._v("\n        Account bio:\n        "),n("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accountBio",modifiers:{accountBio:!0}}],class:[{"button--warning":r.showMoreBio},"button","button--sm"],attrs:{type:"button"}},[r._v("\n          "+r._s(r.showMoreBio?"Hide":"Show")+"\n          "),n("span",[n("b-icon",{attrs:{icon:r.showMoreBio?"arrow-bar-up":"arrow-bar-down"}})],1)])]),r._v(" "),n("b-collapse",{staticClass:"mt-2",attrs:{id:"accountBio"},on:{show:function(t){r.showMoreBio=!0},hide:function(t){r.showMoreBio=!1}},scopedSlots:r._u([{key:"default",fn:function(){return[n("div",{staticClass:"profile__top-bio-content"},[n("div",{staticClass:"profile__top-desc",domProps:{innerHTML:r._s(r.account.bio)}})])]},proxy:!0}])})],1)]),r._v(" "),n("div",{staticClass:"profile__divider"}),r._v(" "),r._t("tabs")],2)}),[],!1,null,null,null);e.default=component.exports},433:function(t,e,r){"use strict";r.r(e);r(14),r(13),r(10),r(15),r(11),r(16);var n=r(3),o=(r(119),r(8),r(56),r(118));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"AccountPostComponent",props:{item:{type:Object,required:!0}},computed:l(l({},Object(o.b)("auth",["user"])),{},{getLiked:function(){var t=this;return!!this.item.likes.find((function(e){return e._id.toString()===t.user._id.toString()}))},getSaved:function(){var t=this;return!(!this.item.savedUsers||!this.item.savedUsers.find((function(e){return e._id.toString()===t.user._id.toString()})))}}),methods:{toPostBtn:function(){this.$emit("goToPost",this.item)}}},d=r(67),component=Object(d.a)(f,(function(){var t,e,r,n=this,o=n._self._c;return o("div",{staticClass:"posts__item"},[o("div",{staticClass:"posts__item-img"},[o("img",{attrs:{src:n.item.media?n.item.media[0].url:n.item.img,alt:"",width:"250px",height:"250px"}})]),n._v(" "),o("div",{staticClass:"posts__item-credentials",on:{click:n.toPostBtn}},[o("span",{staticClass:"posts__item-credentials-item posts__item-credentials--like"},[n._v("\n      "+n._s(Array.isArray(n.item.likes)?null===(t=n.item.likes)||void 0===t?void 0:t.length:n.item.likes)+" "),o("b-icon",{attrs:{icon:n.getLiked?"heart-fill":"heart"}})],1),n._v(" "),o("span",{staticClass:"posts__item-credentials-item posts__item-credentials--comment"},[n._v("\n      "+n._s(null===(e=n.item)||void 0===e?void 0:e.commentsLength)+" "),o("b-icon",{attrs:{icon:"chat-dots"}})],1),n._v(" "),n.item.savedUsers?o("span",{staticClass:"posts__item-credentials-item posts__item-credentials--save"},[n._v("\n      "+n._s(Array.isArray(n.item.savedUsers)?null===(r=n.item.savedUsers)||void 0===r?void 0:r.length:n.item.savedUsers)+" "),o("b-icon",{attrs:{icon:n.getSaved?"bookmark-plus-fill":"bookmark-plus"}})],1):n._e()])])}),[],!1,null,null,null);e.default=component.exports},440:function(t,e,r){"use strict";var n=r(39);r(73);e.a={methods:{unFollowUser:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.$loader.show(),r.prev=1,r.next=4,e.$api.follow.unFollowUser({},{id:t});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),e.handleError(r.t0);case 9:return r.prev=9,e.$loader.hide(),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[1,6,9,12]])})))()},followUser:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.$loader.show(),r.prev=1,r.next=4,e.$api.follow.followUser({},{id:t});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),e.handleError(r.t0);case 9:return r.prev=9,e.$loader.hide(),r.finish(9);case 12:case"end":return r.stop()}}),r,null,[[1,6,9,12]])})))()}}}},463:function(t,e,r){"use strict";r.r(e);var n=r(52),o=(r(42),r(14),r(13),r(10),r(15),r(11),r(16),r(3)),c=r(39),l=(r(8),r(56),r(73),r(118)),f=r(432),d=r(396),v=r(433),h=r(440);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var m={name:"ProfilePage",components:{AccountComponent:f.default,AppAccountHeader:d.default,AppAccountPost:v.default},mixins:[h.a],middleware:["auth"],data:function(){return{userProfile:{},posts:[]}},fetch:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getUser(t.$route.params.id);case 2:return e.next=4,t.getUserPosts(t.$route.params.id);case 4:case"end":return e.stop()}}),e)})))()},head:function(){var t,e;return{title:null===(t=this.userProfile)||void 0===t?void 0:t.name,meta:[{hid:"og:site_name",property:"og:site_name",content:"SocialEx"},{hid:"og:title",property:"og:title",content:"Account-".concat(null===(e=this.userProfile)||void 0===e?void 0:e.name)},{hid:"og:description",property:"og:description",content:"The project of pxls00. Editing and publication of content on the website as directed by the digital content manager"}]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.b)("auth",["user"])),methods:{getCurrent:function(t){return t.toString()===this.user._id.toString()?["profile"]:["user",this.account._id]},toPost:function(data){this.$router.push(this.$getRoutePath("post",data._id))},getUser:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.$loader.show(),r.prev=1,r.next=4,e.$api.users.getUserById({},{id:t});case 4:e.userProfile=r.sent,r.next=10;break;case 7:r.prev=7,r.t0=r.catch(1),e.handleError(r.t0);case 10:return r.prev=10,e.$loader.hide(),r.finish(10);case 13:case"end":return r.stop()}}),r,null,[[1,7,10,13]])})))()},getUserPosts:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.$loader.show(),r.prev=1,r.next=4,e.$api.posts.getPostsList({params:{user:t}});case 4:return n=r.sent,r.next=7,n.data;case 7:return e.posts=r.sent,r.next=10,n.count;case 10:e.userProfile.postsLength=r.sent,r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),e.handleError(r.t0);case 16:return r.prev=16,e.$loader.hide(),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,13,16,19]])})))()},unfollow:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.unFollowUser(t.userProfile._id);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.handleError(e.t0);case 8:return e.prev=8,e.next=11,t.$fetch();case 11:return t.$notify({message:"".concat(t.userProfile.name," has been unfollowed"),variant:"success",delay:2e3}),e.finish(8);case 13:case"end":return e.stop()}}),e,null,[[0,5,8,13]])})))()},follow:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.followUser(t.userProfile._id);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.handleError(e.t0);case 8:return e.prev=8,e.next=11,t.$fetch();case 11:return t.$notify({message:"".concat(t.userProfile.name," has been followed"),variant:"success",delay:2e3}),e.finish(8);case 13:case"end":return e.stop()}}),e,null,[[0,5,8,13]])})))()}}},w=m,O=r(67),component=Object(O.a)(w,(function(){var t=this,e=t._self._c;return e("div",[e("AccountComponent",{attrs:{account:t.userProfile,"post-lenght":t.posts.length},on:{followers:function(e){return t.$bvModal.show("followers")},followings:function(e){return t.$bvModal.show("followings")},unfollow:t.unfollow,follow:t.follow},scopedSlots:t._u([{key:"tabs",fn:function(){return[t.posts.length?e("div",{staticClass:"posts mt-4"},t._l(t.posts,(function(r,n){return e("AppAccountPost",{key:n,attrs:{item:r},on:{goToPost:t.toPost}})})),1):e("p",[t._v(t._s(t.userProfile.name)+" has not created posts yet")])]},proxy:!0}])}),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"followers"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Followers")]},proxy:!0},{key:"default",fn:function(){var r;return[t._l(t.userProfile.followers||[],(function(r,o){return e("AppAccountHeader",{key:o,staticClass:"account--item",attrs:{account:r},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"sugg-action"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent(r._id)))}},[e("button",{staticClass:"button button--sm"},[t._v("Watch")])])],1)]},proxy:!0}],null,!0)})})),t._v(" "),null!==(r=t.userProfile.followers)&&void 0!==r&&r.length?t._e():e("p",[t._v("No followers yet")])]},proxy:!0}])})],1),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"followings"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Followings")]},proxy:!0},{key:"default",fn:function(){var r;return[t._l(t.userProfile.followings||[],(function(r,o){return e("AppAccountHeader",{key:o,staticClass:"account--item",attrs:{account:r},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"sugg-action"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(n.a)(t.getCurrent(r._id)))}},[e("button",{staticClass:"button button--sm"},[t._v("Watch")])])],1)]},proxy:!0}],null,!0)})})),t._v(" "),null!==(r=t.userProfile.followings)&&void 0!==r&&r.length?t._e():e("p",[t._v("No followings yet")])]},proxy:!0}])})],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);