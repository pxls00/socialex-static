(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{454:function(e,t,r){"use strict";r.r(t);var n=r(39),o=(r(60),r(30),r(13),r(82),r(73),{name:"CreatePostPage",components:{CreatePostForm:r(444).default},middleware:["auth"],data:function(){return{post:{}}},fetch:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$route.query.edit){t.next=4;break}return t.next=3,e.getPostItem(e.$route.query.edit);case 3:e.post=t.sent;case 4:case"end":return t.stop()}}),t)})))()},head:function(){return{title:"Create post",meta:[{hid:"og:site_name",property:"og:site_name",content:"SocialEx"},{hid:"og:title",property:"og:title",content:"Create post page"},{hid:"og:description",property:"og:description",content:"The project of pxls00. Editing and publication of content on the website as directed by the digital content manager"}]}},methods:{onSubmit:function(data){var e=this;this.$loader.show(),setTimeout(Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={title:data.title,media:data.images.map((function(e){return{url:e}})),description:data.description},t.next=4,e.$api.posts.craetePostsItem({data:r});case 4:e.$router.push(e.$getRoutePath("home")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.handleError(t.t0);case 10:return t.prev=10,e.$refs.formCreatePost.clearFormData(),e.$loader.hide(),t.finish(10);case 14:case"end":return t.stop()}}),t,null,[[0,7,10,14]])}))),6e3)},getPostItem:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.$loader.show(),r.prev=1,r.next=4,t.$api.posts.getPostItem({},{id:e});case 4:return n=r.sent,r.next=7,n;case 7:return r.abrupt("return",r.sent);case 10:r.prev=10,r.t0=r.catch(1),t.handleError(r.t0);case 13:return r.prev=13,t.$loader.hide(),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[1,10,13,16]])})))()}}}),c=r(67),component=Object(c.a)(o,(function(){var e=this._self._c;return e("div",{staticClass:"create-post-page"},[e("CreatePostForm",{ref:"formCreatePost",on:{submit:this.onSubmit}})],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CreatePostForm:r(444).default})}}]);