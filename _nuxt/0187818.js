(window.webpackJsonp=window.webpackJsonp||[]).push([[27,8,12,13,15,17],{396:function(t,e,n){"use strict";n.r(e);var r=n(52),o=(n(42),n(14),n(13),n(10),n(15),n(11),n(16),n(3)),c=(n(8),n(56),n(118));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={name:"AppAccountHeaderComponent",props:{account:{type:Object,required:!0}},computed:d(d({},Object(c.b)("auth",["user"])),{},{getCurrent:function(){return"_id"in this.account&&this.account._id.toString()===this.user._id.toString()?["profile"]:["user",this.account._id]}})},h=n(67),component=Object(h.a)(f,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"account"},[e("div",{staticClass:"account-avatar"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(r.a)(t.getCurrent))}},[e("img",{attrs:{src:t.account.image,alt:"profile logo"}})])],1),t._v(" "),e("div",{staticClass:"account-info"},[e("div",{staticClass:"account-name"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(r.a)(t.getCurrent))}},[e("h3",[t._v(t._s(t.account.name))])])],1),t._v(" "),e("div",{staticClass:"account-email"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(r.a)(t.getCurrent))}},[e("p",[t._v(t._s(t.account.email))])])],1)]),t._v(" "),t._t("actions")],2)}),[],!1,null,null,null);e.default=component.exports},424:function(t,e,n){"use strict";var r=n(39);n(73);e.a={methods:{removeLike:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$loader.show(),n.prev=1,n.next=4,e.$api.postLike.removePostLike({},{id:t._id});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.handleError(n.t0);case 9:return n.prev=9,e.$loader.hide(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})))()},addLike:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$loader.show(),n.prev=1,n.next=4,e.$api.postLike.addPostLike({},{id:t._id});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.handleError(n.t0);case 9:return n.prev=9,e.$loader.hide(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})))()},savePost:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$loader.show(),n.prev=1,n.next=4,e.$api.postSave.savePost({},{id:t._id});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.handleError(n.t0);case 9:return n.prev=9,e.$loader.hide(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})))()},removeSavedPost:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$loader.show(),n.prev=1,n.next=4,e.$api.postSave.removeSavedPost({},{id:t._id});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.handleError(n.t0);case 9:return n.prev=9,e.$loader.hide(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})))()},deletePostItem:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$loader.show(),n.prev=1,n.next=4,e.$api.posts.deletePostsItem({},{id:t._id});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.handleError(n.t0);case 9:return n.prev=9,e.$loader.hide(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})))()},showLikeList:function(data){this.postItem=data,this.$bvModal.show("likedUsersModal")},closeLikedUsersModal:function(){this.postItem={}},showMoreInfo:function(data){this.postItem=data,this.$bvModal.show("moreInfoPostModal")},closeMoreInfoPostModal:function(){this.postItem={}},showDeleteItem:function(data){this.postItem=data,this.$bvModal.show("deletePost")}}}},427:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(58),{name:"FormSearch",props:{searchVal:{type:String,default:""}},data:function(){return{val:""}},mounted:function(){this.val=this.searchVal},methods:{onSubmit:function(){this.$emit("submit",this.val)},onClear:function(t){this.val="",this.onSubmit()}}}),c=n(67),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("b-form",{staticClass:"w-100",on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("b-input-group",{class:["input_group",Object(r.a)({},"input_group--fill",""!==t.val.trim())]},[e("b-input-group-prepend",{staticClass:"cursor-pointer",attrs:{"is-text":""},on:{click:t.onSubmit}},[e("b-icon",{attrs:{icon:"search"}})],1),t._v(" "),e("b-form-input",{staticClass:"search_input",attrs:{type:"text",placeholder:"Search"},model:{value:t.val,callback:function(e){t.val="string"==typeof e?e.trim():e},expression:"val"}}),t._v(" "),e("span",{staticClass:"input_group__clear"},[e("b-icon",{staticClass:"text-dark",attrs:{icon:"x"},on:{click:t.onClear}})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},434:function(t,e,n){"use strict";n.r(e);var r=n(39),o=(n(73),n(25),n(174),{name:"FetchPaginationLayout",components:{FormSearh:n(427).default},props:{getItems:{type:Function,default:function(){return[]}}},data:function(){return{pageSize:10,page:1,items:[],count:0,searchVal:"",next:!0,getItemsFunc:this.getItems}},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$route.query.page=1,t.$route.query.search="",e.next=4,t.fetchItems();case 4:case"end":return e.stop()}}),e)})))()},computed:{showPagination:function(){return this.count-this.pageSize>0||this.next||this.page>1}},created:function(){this.$route.query.page=1,this.$route.query.search=""},methods:{changePage:function(t){this.$route.query.page=t,this.$refs.formSearch.val=this.searchVal,this.fetchItems()},fetchItems:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.$loader.show(),n=t.$route.query.page,r=t.$route.query.search,o={params:{skip:t.pageSize*(n-1),limit:t.pageSize}},r&&(o.params.search=r),e.next=8,t.getItemsFunc(o);case 8:return c=e.sent,e.next=11,c.data;case 11:return t.items=e.sent,e.next=14,c.count;case 14:return t.count=e.sent,e.next=17,c.next;case 17:t.next=e.sent,t.page=n,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),t.handleError(e.t0);case 24:return e.prev=24,t.$loader.hide(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[0,21,24,27]])})))()},searchItems:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.searchVal=t,e.$route.query.search=e.searchVal,e.$route.query.page=1,n.next=5,e.fetchItems();case 5:case"end":return n.stop()}}),n)})))()}}}),c=o,l=n(67),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"search-form d-flex align-items-center justify-content-between mb-2"},[e("FormSearh",{ref:"formSearch",attrs:{"search-val":t.searchVal},on:{submit:t.searchItems}}),t._v(" "),t.showPagination?e("b-pagination",{staticClass:"ml-3",attrs:{"total-rows":t.count,"per-page":t.pageSize,"first-number":"","last-number":""},on:{change:t.changePage},scopedSlots:t._u([{key:"prev-text",fn:function(){return[e("div",[e("b-icon",{attrs:{icon:"arrow-left-square-fill"}})],1)]},proxy:!0},{key:"next-text",fn:function(){return[e("div",[e("b-icon",{attrs:{icon:"arrow-right-square-fill"}})],1)]},proxy:!0}],null,!1,3196461284),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1),t._v(" "),e("div",{staticClass:"my-2"},[t._t("filter")],2),t._v(" "),t._t("default",null,{items:t.items})],2)}),[],!1,null,null,null);e.default=component.exports},435:function(t,e,n){"use strict";n.r(e);var r=n(52),o=(n(42),n(14),n(13),n(10),n(15),n(11),n(16),n(39)),c=n(3),l=(n(73),n(119),n(8),n(56),n(27),n(118));function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"PostComponent",components:{AppAccountHeader:n(396).default},props:{data:{type:Object,required:!0}},data:function(){return{}},computed:f(f({},Object(l.b)("auth",["user"])),{},{getLike:function(){var t,e=this;return!(null===(t=this.data)||void 0===t||!t.likes.find((function(t){return t._id.toString()===e.user._id.toString()})))},getSave:function(){var t,e=this;return!(null===(t=this.data)||void 0===t||!t.savedUsers.find((function(t){return t._id.toString()===e.user._id.toString()})))},getOwnPost:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.user._id.toString())===this.user._id.toString()},getTime:function(){return this.formatTime()}}),methods:{getRouteAccount:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"_id"in t&&t._id.toString()===this.user._id.toString()?["profile"]:["user",t._id]},formatTime:function(){var t=new Date(this.data.createdData),e=t.getFullYear(),n=t.getMonth(),r=t.getDay(),o=t.getHours(),c=t.getMinutes();return"".concat(r,".0").concat(n+1,".").concat(e," ").concat(o,":").concat(c<10?"0".concat(c):c)},like:function(){this.getLike?this.$emit("unlike",this.data):this.$emit("like",this.data)},save:function(){this.getSave?this.$emit("unsave",this.data):this.$emit("save",this.data)},copyPostURL:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://socialex-static.vercel.app/posts/".concat(data._id),e.prev=1,e.next=4,navigator.clipboard.writeText(n);case 4:t.$notify({message:"Copied to clipboard",variant:"success"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t.handleError(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()},showLikedUsersListBtn:function(){this.$emit("likeList",this.data)},showMoreInfoBtn:function(){this.$emit("getMoreInfo",this.data)},deleteItemBtn:function(){this.$emit("deletePost",this.data)}}},v=h,m=n(67),component=Object(m.a)(v,(function(){var t,e,n=this,o=n._self._c;return o("b-card",{attrs:{"header-tag":"header","footer-tag":"footer"},scopedSlots:n._u([{key:"header",fn:function(){return[o("AppAccountHeader",{staticClass:"account--post",attrs:{account:n.data.user},scopedSlots:n._u([{key:"actions",fn:function(){return[o("div",{staticClass:"post__top-more"},[o("b-dropdown",{staticClass:"post__top-more-btn",attrs:{id:"dropdown-dropup",dropdown:"",dropleft:""},scopedSlots:n._u([{key:"button-content",fn:function(){return[o("b-icon",{attrs:{icon:"three-dots"}})]},proxy:!0}])},[n._v(" "),o("div",{staticClass:"d-flex py-1 px-2 justify-content-between dropdown-item-btn",on:{click:function(t){return n.copyPostURL(n.data)}}},[o("span",{staticClass:"post__dropdown__item-more-link"},[n._v("Copy link")]),n._v(" "),o("span",{staticClass:"post__dropdown__item-more-icon"},[o("b-icon",{attrs:{icon:"link-45deg"}})],1)]),n._v(" "),n.getOwnPost?n._e():o("div",{staticClass:"d-flex py-1 px-2 justify-content-between dropdown-item-btn",on:{click:function(t){n.$router.push(n.$getRoutePath("user",n.data.user._id))}}},[o("span",{staticClass:"post__dropdown__item-more-link"},[n._v("Author account")]),n._v(" "),o("span",{staticClass:"post__dropdown__item-more-icon"},[o("b-icon",{attrs:{icon:"person"}})],1)]),n._v(" "),o("div",{staticClass:"d-flex py-1 px-2 justify-content-between dropdown-item-btn",on:{click:function(t){n.$router.push(n.$getRoutePath("post",n.data._id))}}},[o("span",{staticClass:"post__dropdown__item-more-link"},[n._v("Go to post")]),n._v(" "),o("span",{staticClass:"post__dropdown__item-more-icon"},[o("b-icon",{attrs:{icon:"life-preserver"}})],1)]),n._v(" "),n.getOwnPost?o("div",{staticClass:"d-flex py-1 px-2 justify-content-between dropdown-item-btn",on:{click:n.showMoreInfoBtn}},[o("span",{staticClass:"post__dropdown__item-more-link"},[n._v("More post")]),n._v(" "),o("span",{staticClass:"post__dropdown__item-more-icon"},[o("b-icon",{attrs:{icon:"bar-chart-line"}})],1)]):n._e(),n._v(" "),n.getOwnPost?o("div",{staticClass:"d-flex py-1 px-2 justify-content-between dropdown-item-btn",on:{click:function(t){n.$router.push(n.$getRoutePath("editPost",n.data._id))}}},[o("span",{staticClass:"post__dropdown__item-more-link"},[n._v("Edit post")]),n._v(" "),o("span",{staticClass:"post__dropdown__item-more-icon"},[o("b-icon",{attrs:{icon:"pencil"}})],1)]):n._e(),n._v(" "),n.getOwnPost?o("div",{staticClass:"d-flex py-1 px-2 justify-content-between dropdown-item-btn",on:{click:n.deleteItemBtn}},[o("span",{staticClass:"post__dropdown__item-more-link"},[n._v("Delete post")]),n._v(" "),o("span",{staticClass:"post__dropdown__item-more-icon"},[o("b-icon",{attrs:{icon:"trash"}})],1)]):n._e()])],1)]},proxy:!0}])})]},proxy:!0},{key:"footer",fn:function(){var t,e;return[o("div",{staticClass:"post__bottom"},[o("div",{staticClass:"post__bottom-actions"},[o("span",{class:[{"post__bottom-action--like":n.getLike},"post__bottom-action"],on:{click:n.like}},[o("b-icon",{attrs:{icon:n.getLike?"heart-fill":"heart"}})],1),n._v(" "),o("span",{staticClass:"post__bottom-action post__bottom-action--comment",on:{click:function(t){n.$router.push(n.$getRoutePath("post",n.data._id))}}},[o("b-icon",{attrs:{icon:"chat-dots"}})],1),n._v(" "),o("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",value:"Copy to clipboard",expression:"'Copy to clipboard'",modifiers:{hover:!0,right:!0}}],staticClass:"post__bottom-action post__bottom-action--send",on:{click:function(t){return n.copyPostURL(n.data)}}},[o("b-icon",{attrs:{icon:"link-45deg"}})],1),n._v(" "),o("span",{staticClass:"post__bottom-action post__bottom-action--save",on:{click:n.save}},[o("b-icon",{attrs:{icon:n.getSave?"bookmark-plus-fill":"bookmark-plus"}})],1)]),n._v(" "),o("div",{staticClass:"post__bottom-info"},[o("span",{staticClass:"post__bottom-info-likes",on:{click:n.showLikedUsersListBtn}},[o("b",[n._v(n._s(n.data.likes.length))]),n._v(" likes")]),n._v(" "),o("span",{staticClass:"post__bottom-info-date"},[n._v("Posted in "+n._s(n.getTime))])]),n._v(" "),o("div",{staticClass:"post__bottom-desc"},[o("h5",[o("router-link",{attrs:{to:n.$getRoutePath.apply(n,Object(r.a)(n.getRouteAccount(n.data.user)))}},[n._v(n._s(n.data.user.name))]),n._v(" "),o("span",[n._v(n._s(n.data.title))])],1)]),n._v(" "),o("router-link",{staticClass:"post__bottom-comments-link",attrs:{to:n.$getRoutePath("post",n.data._id)}},[n._v(n._s(null!==(t=n.data)&&void 0!==t&&t.commentsLength?"View all (".concat(null===(e=n.data)||void 0===e?void 0:e.commentsLength,") comments"):"No comments yet"))])],1)]},proxy:!0}])},[n._v(" "),o("b-carousel",{attrs:{id:"carousel-1",controls:(null===(t=n.data.media)||void 0===t?void 0:t.length)>1,indicators:(null===(e=n.data.media)||void 0===e?void 0:e.length)>1,"img-height":"350",interval:0}},n._l(n.data.media,(function(t,e){return o("b-carousel-slide",{key:e,attrs:{alt:"Image"},scopedSlots:n._u([{key:"img",fn:function(){return[o("img",{staticClass:"d-block mx-auto w-100 home-item-img",attrs:{src:t.url}})]},proxy:!0}],null,!0)})})),1)],1)}),[],!1,null,null,null);e.default=component.exports},440:function(t,e,n){"use strict";var r=n(39);n(73);e.a={methods:{unFollowUser:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$loader.show(),n.prev=1,n.next=4,e.$api.follow.unFollowUser({},{id:t});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.handleError(n.t0);case 9:return n.prev=9,e.$loader.hide(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})))()},followUser:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$loader.show(),n.prev=1,n.next=4,e.$api.follow.followUser({},{id:t});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.handleError(n.t0);case 9:return n.prev=9,e.$loader.hide(),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})))()}}}},445:function(t,e,n){"use strict";n.r(e);n(13),n(10),n(15),n(11),n(16);var r=n(3),o=(n(14),n(8),n(56),n(119),n(118));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={name:"SearchAccountComponent",components:{AppAccountHeader:n(396).default},props:{account:{type:Object,required:!0}},computed:l(l({},Object(o.b)("auth",["user"])),{},{getCurrent:function(){return!(!Object.keys(this.account).length||this.account._id.toString()!==this.user._id.toString())},getFollowed:function(){var t=this;return!(this.getCurrent||!Object.keys(this.account).length||!this.account.followers||!this.account.followers.find((function(e){return e._id===t.user._id.toString()})))}}),methods:{getFollowers:function(){this.$emit("followers",this.account)},getFollowings:function(){this.$emit("followings",this.account)}}},f=n(67),component=Object(f.a)(d,(function(){var t,e,n=this,r=n._self._c;return r("div",{staticClass:"search__user-item"},[r("AppAccountHeader",{staticClass:"search__user-header",attrs:{account:n.account},scopedSlots:n._u([{key:"actions",fn:function(){return[r("div",{staticClass:"sugg-action"},[n.getCurrent?r("nuxt-link",{attrs:{to:n.$getRoutePath("settings")}},[r("button",{staticClass:"button"},[n._v("Edit profile")])]):n.getFollowed?r("button",{staticClass:"button button--danger",on:{click:function(t){return n.$emit("unfollow",n.account)}}},[n._v("Unfollow")]):n.getFollowed?n._e():r("button",{staticClass:"button",on:{click:function(t){return n.$emit("follow",n.account)}}},[n._v("Follow")])],1)]},proxy:!0}])}),n._v(" "),r("div",{staticClass:"search__user-credentials"},[r("div",{staticClass:"profile__top-credentials"},[r("p",{staticClass:"profile__top-credentials-item profile__top-credentials-followers"},[r("span",{on:{click:n.getFollowers}},[n._v(n._s(null===(t=n.account.followers)||void 0===t?void 0:t.length))]),n._v("\n        followers\n      ")]),n._v(" "),r("p",{staticClass:"profile__top-credentials-item profile__top-credentials-followings"},[r("span",{on:{click:n.getFollowings}},[n._v(n._s(null===(e=n.account.followings)||void 0===e?void 0:e.length))]),n._v("\n        following\n      ")])]),n._v(" "),r("div",{staticClass:"profile__top-username"},[n._v("\n      "+n._s(n.account.username)+"\n    ")])])],1)}),[],!1,null,null,null);e.default=component.exports},459:function(t,e,n){"use strict";n.r(e);var r=n(52),o=(n(14),n(13),n(10),n(15),n(11),n(16),n(39)),c=n(3),l=(n(73),n(8),n(56),n(42),n(118)),d=n(434),f=n(445),h=n(396),v=n(435),m=n(424),_=n(440);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var y={name:"SearchPage",components:{FetchPaginationLayout:d.default,PostItem:v.default,AccountComponent:f.default,AppAccountHeader:h.default},mixins:[m.a,_.a],middleware:["auth"],data:function(){return{filterOptions:[{value:null,text:"Select option for search"},{value:"post",text:"Search by post title"},{value:"users",text:"Search by user name"}],selected:"users",userAccount:{},postItem:{},searchByUser:!0}},head:function(){return{title:"Search",meta:[{hid:"og:site_name",property:"og:site_name",content:"SocialEx"},{hid:"og:title",property:"og:title",content:"Search accounts or posts in SocialeX"},{hid:"og:description",property:"og:description",content:"The project of pxls00. Editing and publication of content on the website as directed by the digital content manager"}]}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(c.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.b)("auth",["user"])),created:function(){this.getItems=this.getUserItems},methods:{getCurrent:function(t){return t.toString()===this.user._id.toString()?["profile"]:["user",t]},openFollowersList:function(data){this.userAccount=data,this.$bvModal.show("followers")},openFollowingsList:function(data){this.userAccount=data,this.$bvModal.show("followings")},getItems:function(){},getUserItems:function(t){var e=this;return new Promise((function(n,r){e.$api.users.getUsersList(t).then((function(data){n(data)})).catch((function(t){r(t)}))}))},getPostItems:function(t){var e=this;return new Promise((function(n,r){e.$api.posts.getPostsList(t).then((function(data){n(data)})).catch((function(t){r(t)}))}))},changeSearchOption:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"post"!==t.selected){e.next=9;break}return t.getItems=t.getPostItems,t.$refs.fetchPaginationLayout.getItemsFunc=t.getItems,e.next=6,t.$refs.fetchPaginationLayout.$fetch();case 6:t.searchByUser=!1,e.next=15;break;case 9:if("users"!==t.selected){e.next=15;break}return t.getItems=t.getUserItems,t.$refs.fetchPaginationLayout.getItemsFunc=t.getItems,t.searchByUser=!0,e.next=15,t.$refs.fetchPaginationLayout.$fetch();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),t.handelError(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},unfollow:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.userAccount=data,e.next=4,t.unFollowUser(t.userAccount._id);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.handleError(e.t0);case 9:return e.prev=9,e.next=12,t.$refs.fetchPaginationLayout.fetchItems();case 12:return t.$notify({message:"".concat(t.userAccount.name," has been unfollowed"),variant:"success",delay:2e3}),e.finish(9);case 14:case"end":return e.stop()}}),e,null,[[0,6,9,14]])})))()},follow:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.userAccount=data,e.next=4,t.followUser(t.userAccount._id);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.handleError(e.t0);case 9:return e.prev=9,e.next=12,t.$refs.fetchPaginationLayout.fetchItems();case 12:return t.$notify({message:"".concat(t.userAccount.name," has been followed"),variant:"success",delay:2e3}),e.finish(9);case 14:case"end":return e.stop()}}),e,null,[[0,6,9,14]])})))()},removeLikeClicked:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.removeLike(t);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.handleError(n.t0);case 8:return n.prev=8,n.next=11,e.$refs.fetchPaginationLayout.fetchItems();case 11:return e.$notify({message:"Post has been unliked sucessfully",variant:"success"}),n.finish(8);case 13:case"end":return n.stop()}}),n,null,[[0,5,8,13]])})))()},addLikeClicked:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.addLike(t);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.handleError(n.t0);case 8:return n.prev=8,n.next=11,e.$refs.fetchPaginationLayout.fetchItems();case 11:return e.$notify({message:"Post has been liked sucessfully",variant:"success"}),n.finish(8);case 13:case"end":return n.stop()}}),n,null,[[0,5,8,13]])})))()},removeSavedPostClicked:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.removeSavedPost(t);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.handleError(n.t0);case 8:return n.prev=8,n.next=11,e.$refs.fetchPaginationLayout.fetchItems();case 11:return e.$notify({message:"Post has been removed sucessfully",variant:"success"}),n.finish(8);case 13:case"end":return n.stop()}}),n,null,[[0,5,8,13]])})))()},savePostClicked:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.savePost(t);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e.handleError(n.t0);case 8:return n.prev=8,n.next=11,e.$refs.fetchPaginationLayout.fetchItems();case 11:return e.$notify({message:"Post has been saved sucessfully",variant:"success"}),n.finish(8);case 13:case"end":return n.stop()}}),n,null,[[0,5,8,13]])})))()}}},k=y,x=n(67),component=Object(x.a)(k,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"search"},[e("FetchPaginationLayout",{ref:"fetchPaginationLayout",attrs:{"get-items":t.getItems},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.items;return[t.searchByUser?t.searchByUser?e("div",{staticClass:"search__user-list"},t._l(r,(function(n,r){return e("AccountComponent",{key:r,staticClass:"search__user-item",attrs:{account:n},on:{followers:t.openFollowersList,followings:t.openFollowingsList,unfollow:t.unfollow,follow:t.follow}})})),1):t._e():e("div",{staticClass:"search__post-list"},t._l(r,(function(n,r){return e("div",{key:r,staticClass:"post-item"},[e("PostItem",{attrs:{data:n},on:{unlike:t.removeLikeClicked,like:t.addLikeClicked,unsave:t.removeSavedPostClicked,save:t.savePostClicked,likeList:t.showLikeList,getMoreInfo:t.showMoreInfo}})],1)})),0)]}},{key:"filter",fn:function(){return[e("b-form-select",{attrs:{options:t.filterOptions},on:{change:t.changeSearchOption},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})]},proxy:!0}])}),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"followers"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Followers")]},proxy:!0},{key:"default",fn:function(){var n;return[t._l(t.userAccount.followers||[],(function(n,o){return e("AppAccountHeader",{key:o,staticClass:"account--item",attrs:{account:n},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"sugg-action"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(r.a)(t.getCurrent(n._id)))}},[e("button",{staticClass:"button button--sm"},[t._v("Watch")])])],1)]},proxy:!0}],null,!0)})})),t._v(" "),null!==(n=t.userAccount.followers)&&void 0!==n&&n.length?t._e():e("p",[t._v("No followers yet")])]},proxy:!0}])})],1),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"followings"},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Followings")]},proxy:!0},{key:"default",fn:function(){var n;return[t._l(t.userAccount.followings||[],(function(n,o){return e("AppAccountHeader",{key:o,staticClass:"account--item",attrs:{account:n},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"sugg-action"},[e("nuxt-link",{attrs:{to:t.$getRoutePath.apply(t,Object(r.a)(t.getCurrent(n._id)))}},[e("button",{staticClass:"button button--sm"},[t._v("Watch")])])],1)]},proxy:!0}],null,!0)})})),t._v(" "),null!==(n=t.userAccount.followings)&&void 0!==n&&n.length?t._e():e("p",[t._v("No followings yet")])]},proxy:!0}])})],1),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"moreInfoPostModal"},on:{close:t.closeMoreInfoPostModal},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("More about post")]},proxy:!0},{key:"default",fn:function(){var n,r,o;return[e("div",{staticClass:"w-100 d-flex justify-content-center"},[e("div",{staticClass:"w-25 d-flex flex-column align-items-center"},[e("span",[e("b-icon",{attrs:{icon:"heart"}})],1),t._v(" "),e("b",{staticClass:"text-center"},[t._v(t._s(null===(n=t.postItem.likes)||void 0===n?void 0:n.length))])]),t._v(" "),e("div",{staticClass:"w-25 d-flex flex-column align-items-center"},[e("span",[e("b-icon",{attrs:{icon:"bookmark-plus"}})],1),t._v(" "),e("b",{staticClass:"text-center"},[t._v(t._s(null===(r=t.postItem.savedUsers)||void 0===r?void 0:r.length))])]),t._v(" "),e("div",{staticClass:"w-25 d-flex flex-column align-items-center"},[e("span",[e("b-icon",{attrs:{icon:"chat-dots"}})],1),t._v(" "),e("b",{staticClass:"text-center"},[t._v(t._s(null===(o=t.postItem.comments)||void 0===o?void 0:o.length))])])])]},proxy:!0}])})],1),t._v(" "),e("client-only",[e("AppModal",{attrs:{id:"likedUsersModal"},on:{close:t.closeLikedUsersModal},scopedSlots:t._u([{key:"title",fn:function(){var n;return[t._v("Likes "),e("b",[t._v(t._s(null===(n=t.postItem.likes)||void 0===n?void 0:n.length))])]},proxy:!0},{key:"default",fn:function(){var n;return t._l(null===(n=t.postItem)||void 0===n?void 0:n.likes,(function(n,r){return e("AppAccountHeader",{key:r,staticClass:"account--item",attrs:{account:n},scopedSlots:t._u([{key:"actions",fn:function(){return[e("div",{staticClass:"sugg-action"},[e("nuxt-link",{attrs:{to:t.$getRoutePath("user",n._id)}},[e("button",{staticClass:"button button--sm"},[t._v("Watch")])])],1)]},proxy:!0}],null,!0)})}))},proxy:!0}])})],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);